{"ast":null,"code":"import { isVNode, defineComponent, createVNode, renderSlot, createTextVNode } from 'vue';\nimport { isString, isArray } from '@vue/shared';\nimport '../../../utils/index.mjs';\nimport '../../../constants/index.mjs';\nimport SpaceItem from './item.mjs';\nimport { useSpace } from './use-space.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { isNumber } from '@vueuse/core';\nimport { componentSizes } from '../../../constants/size.mjs';\nimport { isFragment, PatchFlags, isValidElementNode } from '../../../utils/vue/vnode.mjs';\nconst spaceProps = buildProps({\n  direction: {\n    type: String,\n    values: [\"horizontal\", \"vertical\"],\n    default: \"horizontal\"\n  },\n  class: {\n    type: definePropType([String, Object, Array]),\n    default: \"\"\n  },\n  style: {\n    type: definePropType([String, Array, Object]),\n    default: \"\"\n  },\n  alignment: {\n    type: definePropType(String),\n    default: \"center\"\n  },\n  prefixCls: {\n    type: String\n  },\n  spacer: {\n    type: definePropType([Object, String, Number, Array]),\n    default: null,\n    validator: val => isVNode(val) || isNumber(val) || isString(val)\n  },\n  wrap: Boolean,\n  fill: Boolean,\n  fillRatio: {\n    type: Number,\n    default: 100\n  },\n  size: {\n    type: [String, Array, Number],\n    values: componentSizes,\n    validator: val => {\n      return isNumber(val) || isArray(val) && val.length === 2 && val.every(isNumber);\n    }\n  }\n});\nvar Space = defineComponent({\n  name: \"ElSpace\",\n  props: spaceProps,\n\n  setup(props, {\n    slots\n  }) {\n    const {\n      classes,\n      containerStyle,\n      itemStyle\n    } = useSpace(props);\n\n    function extractChildren(children, parentKey = \"\", extractedChildren = []) {\n      const {\n        prefixCls\n      } = props;\n      children.forEach((child, loopKey) => {\n        if (isFragment(child)) {\n          if (isArray(child.children)) {\n            child.children.forEach((nested, key) => {\n              if (isFragment(nested) && isArray(nested.children)) {\n                extractChildren(nested.children, `${parentKey + key}-`, extractedChildren);\n              } else {\n                extractedChildren.push(createVNode(SpaceItem, {\n                  style: itemStyle.value,\n                  prefixCls,\n                  key: `nested-${parentKey + key}`\n                }, {\n                  default: () => [nested]\n                }, PatchFlags.PROPS | PatchFlags.STYLE, [\"style\", \"prefixCls\"]));\n              }\n            });\n          }\n        } else if (isValidElementNode(child)) {\n          extractedChildren.push(createVNode(SpaceItem, {\n            style: itemStyle.value,\n            prefixCls,\n            key: `LoopKey${parentKey + loopKey}`\n          }, {\n            default: () => [child]\n          }, PatchFlags.PROPS | PatchFlags.STYLE, [\"style\", \"prefixCls\"]));\n        }\n      });\n      return extractedChildren;\n    }\n\n    return () => {\n      var _a;\n\n      const {\n        spacer,\n        direction\n      } = props;\n      const children = renderSlot(slots, \"default\", {\n        key: 0\n      }, () => []);\n      if (((_a = children.children) != null ? _a : []).length === 0) return null;\n\n      if (isArray(children.children)) {\n        let extractedChildren = extractChildren(children.children);\n\n        if (spacer) {\n          const len = extractedChildren.length - 1;\n          extractedChildren = extractedChildren.reduce((acc, child, idx) => {\n            const children2 = [...acc, child];\n\n            if (idx !== len) {\n              children2.push(createVNode(\"span\", {\n                style: [itemStyle.value, direction === \"vertical\" ? \"width: 100%\" : null],\n                key: idx\n              }, [isVNode(spacer) ? spacer : createTextVNode(spacer, PatchFlags.TEXT)], PatchFlags.STYLE));\n            }\n\n            return children2;\n          }, []);\n        }\n\n        return createVNode(\"div\", {\n          class: classes.value,\n          style: containerStyle.value\n        }, extractedChildren, PatchFlags.STYLE | PatchFlags.CLASS);\n      }\n\n      return children.children;\n    };\n  }\n\n});\nexport { Space as default, spaceProps };","map":{"version":3,"mappings":"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","names":["spaceProps","buildProps","direction","type","String","values","default","class","definePropType","Object","Array","style","alignment","prefixCls","spacer","Number","validator","val","isVNode","isNumber","isString","wrap","Boolean","fill","fillRatio","size","componentSizes","isArray","length","every","defineComponent","name","props","setup","slots","classes","containerStyle","itemStyle","useSpace","extractChildren","children","parentKey","extractedChildren","forEach","child","loopKey","isFragment","nested","key","push","createVNode","Item","value","PatchFlags","PROPS","STYLE","isValidElementNode","_a","renderSlot","len","reduce","acc","idx","children2","createTextVNode","TEXT","CLASS"],"sources":["../../../../../../packages/components/space/src/space.ts"],"sourcesContent":["import {\n  createTextVNode,\n  createVNode,\n  defineComponent,\n  isVNode,\n  renderSlot,\n} from 'vue'\nimport { isString } from '@vue/shared'\nimport {\n  PatchFlags,\n  buildProps,\n  definePropType,\n  isArray,\n  isFragment,\n  isNumber,\n  isValidElementNode,\n} from '@element-plus/utils'\nimport { componentSizes } from '@element-plus/constants'\nimport Item from './item'\nimport { useSpace } from './use-space'\n\nimport type {\n  ExtractPropTypes,\n  StyleValue,\n  VNode,\n  VNodeArrayChildren,\n  VNodeChild,\n} from 'vue'\nimport type { AlignItemsProperty } from 'csstype'\n\nexport const spaceProps = buildProps({\n  direction: {\n    type: String,\n    values: ['horizontal', 'vertical'],\n    default: 'horizontal',\n  },\n\n  class: {\n    type: definePropType<string | string[] | Record<string, boolean>>([\n      String,\n      Object,\n      Array,\n    ]),\n    default: '',\n  },\n\n  style: {\n    type: definePropType<StyleValue>([String, Array, Object]),\n    default: '',\n  },\n\n  alignment: {\n    type: definePropType<AlignItemsProperty>(String),\n    default: 'center',\n  },\n\n  prefixCls: {\n    type: String,\n  },\n\n  spacer: {\n    type: definePropType<VNodeChild>([Object, String, Number, Array]),\n    default: null,\n    validator: (val: unknown) => isVNode(val) || isNumber(val) || isString(val),\n  },\n\n  wrap: Boolean,\n\n  fill: Boolean,\n\n  fillRatio: {\n    type: Number,\n    default: 100,\n  },\n\n  size: {\n    type: [String, Array, Number],\n    values: componentSizes,\n    validator: (val: unknown): val is [number, number] | number => {\n      return (\n        isNumber(val) ||\n        (isArray(val) && val.length === 2 && val.every(isNumber))\n      )\n    },\n  },\n} as const)\nexport type SpaceProps = ExtractPropTypes<typeof spaceProps>\n\nexport default defineComponent({\n  name: 'ElSpace',\n\n  props: spaceProps,\n\n  setup(props, { slots }) {\n    const { classes, containerStyle, itemStyle } = useSpace(props)\n\n    // retrieve the children out via a simple for loop\n    // the edge case here is that when users uses directives like <v-for>, <v-if>\n    // we need to go deeper until the child is not the Fragment type\n    function extractChildren(\n      children: VNodeArrayChildren,\n      parentKey = '',\n      extractedChildren: VNode[] = []\n    ) {\n      const { prefixCls } = props\n      children.forEach((child, loopKey) => {\n        if (isFragment(child)) {\n          if (isArray(child.children)) {\n            child.children.forEach((nested, key) => {\n              if (isFragment(nested) && isArray(nested.children)) {\n                extractChildren(\n                  nested.children,\n                  `${parentKey + key}-`,\n                  extractedChildren\n                )\n              } else {\n                extractedChildren.push(\n                  createVNode(\n                    Item,\n                    {\n                      style: itemStyle.value,\n                      prefixCls,\n                      key: `nested-${parentKey + key}`,\n                    },\n                    {\n                      default: () => [nested],\n                    },\n                    PatchFlags.PROPS | PatchFlags.STYLE,\n                    ['style', 'prefixCls']\n                  )\n                )\n              }\n            })\n          }\n          // if the current child is valid vnode, then append this current vnode\n          // to item as child node.\n        } else if (isValidElementNode(child)) {\n          extractedChildren.push(\n            createVNode(\n              Item,\n              {\n                style: itemStyle.value,\n                prefixCls,\n                key: `LoopKey${parentKey + loopKey}`,\n              },\n              {\n                default: () => [child],\n              },\n              PatchFlags.PROPS | PatchFlags.STYLE,\n              ['style', 'prefixCls']\n            )\n          )\n        }\n      })\n\n      return extractedChildren\n    }\n\n    return () => {\n      const { spacer, direction } = props\n\n      const children = renderSlot(slots, 'default', { key: 0 }, () => [])\n\n      if ((children.children ?? []).length === 0) return null\n      // loop the children, if current children is rendered via `renderList` or `<v-for>`\n      if (isArray(children.children)) {\n        let extractedChildren = extractChildren(children.children)\n\n        if (spacer) {\n          // track the current rendering index, when encounters the last element\n          // then no need to add a spacer after it.\n          const len = extractedChildren.length - 1\n          extractedChildren = extractedChildren.reduce<VNode[]>(\n            (acc, child, idx) => {\n              const children = [...acc, child]\n              if (idx !== len) {\n                children.push(\n                  createVNode(\n                    'span',\n                    // adding width 100% for vertical alignment,\n                    // when the spacer inherit the width from the\n                    // parent, this span's width was not set, so space\n                    // might disappear\n                    {\n                      style: [\n                        itemStyle.value,\n                        direction === 'vertical' ? 'width: 100%' : null,\n                      ],\n                      key: idx,\n                    },\n                    [\n                      // if spacer is already a valid vnode, then append it to the current\n                      // span element.\n                      // otherwise, treat it as string.\n                      isVNode(spacer)\n                        ? spacer\n                        : createTextVNode(spacer as string, PatchFlags.TEXT),\n                    ],\n                    PatchFlags.STYLE\n                  )\n                )\n              }\n              return children\n            },\n            []\n          )\n        }\n\n        // spacer container.\n        return createVNode(\n          'div',\n          {\n            class: classes.value,\n            style: containerStyle.value,\n          },\n          extractedChildren,\n          PatchFlags.STYLE | PatchFlags.CLASS\n        )\n      }\n\n      return children.children\n    }\n  },\n})\n"]},"metadata":{},"sourceType":"module"}